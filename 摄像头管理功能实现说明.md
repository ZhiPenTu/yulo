# 摄像头管理功能实现说明

## 项目概述
基于若依框架实现的摄像头管理功能，包含完整的前后端代码，支持摄像头的增删改查操作。

## 技术栈
- **前端**: Vue 3 + Element Plus + Vite
- **后端**: Spring Boot + MyBatis + MySQL
- **框架**: 若依(RuoYi)管理系统

## 功能特性
✅ 摄像头列表展示  
✅ 条件搜索（编号、名称、状态）  
✅ 新增摄像头  
✅ 编辑摄像头  
✅ 删除摄像头  
✅ 分页显示  
✅ 权限控制  
✅ 数据校验  
✅ 响应式设计  

## 文件结构

### 前端文件
```
yulo-ui/src/
├── views/deviceManage/camar/
│   └── index.vue                    # 摄像头管理主页面
└── api/deviceManage/
    └── camera.js                    # 摄像头API接口
```

### 后端文件
```
src/main/java/com/ruoyi/project/device/
├── controller/
│   └── CameraController.java        # 控制器
├── domain/
│   └── Camera.java                  # 实体类
├── mapper/
│   └── CameraMapper.java           # 数据访问接口
└── service/
    ├── ICameraService.java         # 服务接口
    └── impl/
        └── CameraServiceImpl.java  # 服务实现

src/main/resources/mybatis/device/
└── CameraMapper.xml                # MyBatis映射文件
```

### 数据库文件
```
sql/
└── camera.sql                      # 数据库表结构和初始数据
```

## 数据库设计

### 摄像头表 (camera)
| 字段名 | 类型 | 说明 | 约束 |
|--------|------|------|------|
| id | bigint(20) | 主键ID | 自增主键 |
| camera_code | varchar(50) | 摄像头编号 | 唯一，非空 |
| camera_name | varchar(100) | 摄像头名称 | 非空 |
| video_source | varchar(500) | 视频源地址 | 非空 |
| media_proxy | varchar(100) | 媒体代理 | 非空 |
| radar_code | varchar(50) | 关联雷达编号 | 可空 |
| coordinates | varchar(200) | 经纬度,偏北角 | 可空 |
| camera_info | text | 摄像头属性信息 | 可空 |
| status | char(1) | 状态 | 0离线 1在线 |
| create_by | varchar(64) | 创建者 | - |
| create_time | datetime | 创建时间 | - |
| update_by | varchar(64) | 更新者 | - |
| update_time | datetime | 更新时间 | - |
| remark | varchar(500) | 备注 | - |

## API接口

### 1. 查询摄像头列表
- **URL**: `GET /device/camera/list`
- **权限**: `device:camera:list`
- **参数**: 
  - `cameraCode`: 摄像头编号（可选）
  - `cameraName`: 摄像头名称（可选）
  - `status`: 状态（可选）
  - `pageNum`: 页码
  - `pageSize`: 每页大小

### 2. 查询摄像头详情
- **URL**: `GET /device/camera/{id}`
- **权限**: `device:camera:query`

### 3. 新增摄像头
- **URL**: `POST /device/camera`
- **权限**: `device:camera:add`
- **参数**: Camera对象

### 4. 修改摄像头
- **URL**: `PUT /device/camera`
- **权限**: `device:camera:edit`
- **参数**: Camera对象

### 5. 删除摄像头
- **URL**: `DELETE /device/camera/{ids}`
- **权限**: `device:camera:remove`

## 部署步骤

### 1. 数据库初始化
```sql
-- 执行摄像头表创建和菜单权限
source sql/camera.sql;
```

### 2. 后端部署
```bash
# 编译项目
mvn clean compile

# 启动服务
mvn spring-boot:run
```

### 3. 前端部署
```bash
# 进入前端目录
cd yulo-ui

# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 或构建生产版本
npm run build:prod
```

## 测试用例

### 功能测试
1. **列表查询**
   - 访问摄像头管理页面
   - 验证数据正常显示
   - 测试搜索功能

2. **新增摄像头**
   - 点击"新增摄像头"按钮
   - 填写必填字段
   - 验证保存成功

3. **编辑摄像头**
   - 点击列表中的"修改"按钮
   - 修改信息并保存
   - 验证更新成功

4. **删除摄像头**
   - 选择要删除的摄像头
   - 点击删除按钮
   - 确认删除成功

### 权限测试
- 验证各操作的权限控制
- 测试无权限用户的访问限制

### 数据校验测试
- 测试必填字段验证
- 测试摄像头编号唯一性
- 测试数据格式验证

## 注意事项
1. 摄像头编号必须唯一，系统会自动校验
2. 摄像头属性信息需要是有效的JSON格式
3. 确保用户有相应的菜单和按钮权限
4. 视频源地址格式需要正确（如RTSP地址）

## 扩展功能建议
- 摄像头状态实时监控
- 视频预览功能
- 批量导入摄像头
- 摄像头分组管理
- 地图定位显示